---
- name: Populate users and groups
  hosts: all
  gather_facts: no
  tasks:

    - name: Load group information
      set_fact:
        user_groups: "{{ lookup('file', 'groups.yml') | from_yaml }}"
    
    - name: show data
      debug:
        var: user_groups

    - name: Create groups
      group:
        name: "{{ item.name }}"
        state: present
      loop: "{{ user_groups }}"

